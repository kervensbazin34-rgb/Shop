<!-- acceuil.html -->
{% extends "boutique/base.html" %}

{% block content %}
<h1 style="text-align:center; margin:20px 0;">Produits</h1>

<!-- ðŸ”¹ Bar de recherche ak bouton -->
<form method="GET" action="{% url 'boutique:acceuil' %}" style="display:flex; justify-content:center; align-items:center; gap:10px; margin-bottom:20px;">
    <input type="text" name="q" placeholder="Rechercher un produit ou une catÃ©gorie" value="{{ query|default:'' }}" style="padding:5px; width:250px; border-radius:5px; border:1px solid #ccc;">
    <button type="submit" style="padding:5px 15px; background-color:#4CAF50; color:white; border:none; border-radius:5px; cursor:pointer;">Rechercher</button>
</form>

<!-- ðŸ”¹ Dropdown kategori yo -->
<div style="display:flex; justify-content:center; align-items:center; gap:20px; margin-bottom:20px;">
    <div class="dropdown">
        <button class="dropdown-btn">CatÃ©gories</button>
        <div class="dropdown-content">
            <a href="{% url 'boutique:acceuil' %}">Tous</a>
            {% for cat in categories %}
                <a href="{% url 'boutique:produits_par_categorie' cat.id %}" 
                   class="{% if categorie_active and categorie_active.id == cat.id %}active{% endif %}">
                   {{ cat.nom }}
                </a>
            {% endfor %}
        </div>
    </div>
</div>

<!-- ðŸ”¹ Grid Pwodwi yo -->
<div class="produits-grid">
    {% for produit in produits %}
        <div class="produit-card">
            {% if produit.image %}
                <img src="{{ produit.image.url }}" alt="{{ produit.nom }}">
            {% else %}
                <img src="/static/images/default.png" alt="Image par dÃ©faut">
            {% endif %}

            <h3>{{ produit.nom }}</h3>
            <p><strong>{{ produit.prix }} HTG</strong></p>

            <form method="POST" action="{% url 'boutique:ajouter_au_panier' produit.id %}">
                {% csrf_token %}
                <label for="quantite_{{ produit.id }}">QuantitÃ©:</label>
                <input type="number" name="quantite" id="quantite_{{ produit.id }}" value="1" min="1" style="width:50px; margin-right:10px;">
                <button type="submit" class="btn-ajouter">Ajouter au panier</button>
            </form>
        </div>
    {% empty %}
        <p style="text-align:center;">Aucun produit trouvÃ©.</p>
    {% endfor %}
</div>

<style>
/* ðŸ”¹ Grid pwodwi */
.produits-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 20px;
    margin: 20px;
}

.produit-card {
    background: #fff;
    border: 1px solid #ddd;
    border-radius: 10px;
    padding: 15px;
    text-align: center;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.produit-card img {
    width: 100%;
    height: 200px;
    object-fit: contain;
    background: #f5f5f5;
    border-radius: 8px;
    margin-bottom: 10px;
}

.produit-card h3 {
    margin: 10px 0 5px;
}

.produit-card p {
    margin: 5px 0 10px;
    font-weight: bold;
    color: #333;
}

.produit-card form {
    margin-top: auto;
}

.produit-card input[type="number"] {
    width: 60px;
    padding: 5px;
    text-align: center;
}

.produit-card button {
    background: #4CAF50;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 5px;
    cursor: pointer;
}

.produit-card button:hover {
    background: #45a049;
}

/* ðŸ”¹ Dropdown kategori yo */
.dropdown {
    position: relative;
    display: inline-block;
}

.dropdown-btn {
    background-color: #4CAF50;
    color: white;
    padding: 12px 20px;
    font-size: 16px;
    border: none;
    cursor: pointer;
    border-radius: 6px;
}

.dropdown-btn:hover {
    background-color: #45a049;
}

.dropdown-content {
    display: none;
    position: absolute;
    background-color: white;
    min-width: 220px;
    box-shadow: 0px 8px 16px rgba(0,0,0,0.2);
    z-index: 1;
    border-radius: 6px;
}

.dropdown-content a {
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
}

.dropdown-content a:hover {
    background-color: #f1f1f1;
}

.dropdown:hover .dropdown-content {
    display: block;
}
</style>

{% endblock %}
